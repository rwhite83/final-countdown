extends layout

block content
    include header.pug

    //- Applying flex-container-horz to get the display flex instead of floating the divs 
    .home-content.flex-container-horz
        .home-content-left
            .home-user-preview
                a(href="/myprofile")
                    img(src=data.url).user-image.home-image
                h3.home-user-name #{ data.firstName + " " + data.lastName }
                p.home-user-bio #{ data.bio }
                //- Add in the links for anchors here
                .home-user-clickables
                    ul.home-user-info.no-style-list
                        li.home-user-posts.flex-container-horz
                            a(href="") Posts
                            p.home-user-postCount #{ data.postsCount }
                        li.home-user-messages.flex-container-horz
                            a(href="/messages/allmessages") Messages
                            p.home-user-messageCount #{ data.messages }
                        li.home-user-likes.flex-container-horz  
                            a(href="") Likes
                            p.home-user-likeCount #{ data.likes }
                        li.home-user-edit
                            a(href="/users/edit-profile") Edit Profile
        .home-content-right
            h1.home-allposts-title All posts
            //- His instructions are kinda unclear, is this supposed to show on click?
            //- What should it look like before the click?  
                each post in posts
            each post in postsLewis
                div.post.home-question.flex-container-horz
                    div.home-question-left
                        img(src=post.img).question-image
                    .home-question-right
                        p.home-question-title.flex-container-horz #{ post.subject }
                            button.home-question-type.question-button #{ post.tag }
                        p.home-question-content #{ post.message }
                        p.home-question-date.flex-container-horz #{ post.date }
                            a.home-question-replies-button(onclick="showReplies(this)") #{ post.replies.length} replies
                        //-     This is what shows on replies click
                        .home-question-replies.flex-container-vert.hidden
                            //- Injecting replies STARTS here
                            each reply in post.replies
                                .home-question-replies-reply.flex-container-horz
                                    .reply-img-container
                                        img(src=reply.userImage, alt="").reply-image
                                    .reply-textcontent-container
                                        p.reply-textcontent #{ reply.message }
                                .reply-date-container
                                    p.reply-date #{reply.commentDate.toISOString().substring(0, 10)}
                            //- Injecting replies ENDS here
                            .home-questions-replies-inputs.flex-container-vert
                                form(method="POST", action='/questions/addComment')
                                    input(type="text" value=post.postID name="postID").hidden
                                    textarea(cols="40", rows="5" placeholder="add your reply..." name="comment").reply-input-content
                                    input(type="submit", value="comment").reply-input-submit.button